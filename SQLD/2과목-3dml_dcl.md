## 2-17 DML

- DML

    - 데이터의 삽입, 수정, 삭제, 병합

    - 저장 혹은 취소 반드시 필요


- INSERT

    - 테이블에 행을 삽입 할때 사용

    - 한번에 한행만 입력가능/ SQL은 여러행 동시 삽입 가능

    - 컬럼별 데이터타입과 사이즈 맞게 삽입

- UPDATE

    - 데이터 수정할 때 사용

    - 컬럼 단위 수행

    - 다중 컬럼 수정 가능

- DELETE

    - 데이터를 삭제 할때 사용

    - 행 단위 실행

- MERGE

    - 데이터 병합

    - 참조 테이블과 동일하게 맞추는 작업

    - INSERT, UPDATE, DELETE 작업을 동시에 수행


## 2-18 TCL

- TCL

    - 트랜잭션 제어어로 COMMIT, ROLLBACK이 포함됨

    - DML에 의해 조작된 결과를 작업단위 별로 제어하는 명령어

    - DML 수행 후 트랜잭션을 정상 종료하지 않는 경우 LOCK 발생할 수 있음

    - LOCK이란?

        - 트랜잭션이 수행하는 동안 특정 데이터에 대해서 다른 트랜잭션이 접근하지 못하도록 제한

- 트랜잭션

    - 트랜잭션은 데이터베이스의 논리적 연산단위

    - 하나의 트랜잭션에는 하나 이상의 SQL 문장이 포함

- 트랜잭션의 특징

    - 원자성, 일관선, 고립성, 지속성

- COMMIT

    - 입력, 수정, 삭제한 데이터에 이상이 없을 경우 데이터를 저장하는 명령어

    - 한번 COMMIT을 수행하면 COMMIT 이전에 수행된 DML은 모두 저장되며 되돌릴수 없음

- ROLLBACK

    - 테이블 내 입력한 데이터나 수정한 데이터, 삭제한 데이터에 대해 변경을 취소하는 명령어

    - 데이터베이스에 저장되지 않고 최종 COMMIT 지점/ 변경 전/ 특정 SAVEPOINT지점으로 원복됨

    - SAVEPOINT?

        - 트랜잭션 내에서 롤백을 부분적으로 수행하기 위해 사용되는 지점을 지정하는데 사용

## 2-19 DDL

- DDL 

    - 데이터 정의어

    - 데이터 구조 정의(객체 생성, 삭제, 변경) 언어

    - CREATE, ALTER, DROP, TRUNCATE

- CREATE

    - 테이블이나 인덱스와 같은 객체를 생성하는 명령어

    - 테이블 생성시 테이블명, 컬럼명, 컬럼순서, 컬럼크기, 컬럼의 데이터 타입 정의 필수

    - 특징

        - 복제 테이블의 컬럼명과 컬럼의 데이터 타입이 복제된

        - SELECT문에서 컬럼별칭 사용 시 컬럼별칭 이름으로 생성

        - NULL 속성도 복제됨

- 데이터 타입

    - CHAR(불변형), VACHAR(가변형)의 차이 기억할것


- ALTER

    - 테이블 구조 변경

    - 컬럼 순서 변경 불가

    - 컬럼 추가는 항상 맨마지막에 추가

    - 여러 컬럼 동시 추가 가능 (반드시 괄호와 함께 전달)

1. 컬럼 사이즈 변경

    - 증가는 항상 가능

    - 컬럼 사이즈 축소는 데이터 존재 여부에 따라 제한

    - 동시 변경 가능(반드시 괄호 필요)

2. 데이터 타입 변경

    - 빈 컬럼일 경우 데이터 타입 변경 가능

    - CHAR, VACHAR 타입일 경우 데이터가 있어도 서로 변경 가능

3. DEFAULT값 변경

    - DEFAULT값이란 특정 컬럼에 값이 생략될 경우 자동으로 부여되는 값

    - NULL을 직접 입력할 때는 DEFAULT값이 아닌 NULL이 입력됨


4. 컬럼 이름 변경

    - 항상 가능

    - 동시 여러 컬럼 변경 불가

5. 컬럼 삭제

    - 데이터 존재 여부와 상관없이 언제나 가능

    - 휴지통에 남지 않음

    - 동시 삭제 불가

    - DROP

        - 객체 삭제

        - DROP 후에는 조회 불가

    - TRUNCATE

        - 구조 남기고 데이터만 즉시 삭제, 즉시 반영

        - 휴지통에 남지 않음


- 제약 조건

    - 데이터 무결성을 위해 각 컬럼에 생성하는 데이터의 제약 장치

    - 테이블 생성 시 정의 가능, 컬럼 추가 시 정의 가능, 이미 생성된 컬럼에 제약조건만 추가 가능

    1. PRIMARY KEY

        - 유일한 식별자

        - 중복 X, NULL X

        - 하나의 기본키를 여러 컬럼을 결합하여 생성할 수 있음

    2. UNIQUE

        - 중복을 허용하지 않음

        - NULL은 허용

    3. NOT NULL

        - 다른 제약조건과 다르게 컬럼의 특징을 나타냄

        - 컬럼 생성 시 NOT NULL을 선언하지 않으면 Nullable 컬럼으로 생성됨

    4. FOREIGN KEY

        - 참조테이블의 참조 컬럼에 있는 데이터를 확인하면서 본 테이블 데이터를 관리할 목적으로 생성

        - 반드시 참조 테이블의 참조 컬럼이 사전에 PK 혹은 UNIQUE KEY를 가져야함

        - FOREIGN KEY 옵션

            - ON DELETE CASCADE: 부모 데이터 삭제 시 자식 데이터 함께 삭제

            - ON DELETE SET NULL: 부모 데이터 삭제 시 자식 데이터의 참조 값은 NULL로 수정

    5. CHECK

        - 직접적으로 데이터의 값 제한
    
- 기타 오브젝트

    - 뷰

        - 저장 공간을 가지지는 않지만 테이블처럼 조회 및 수정할 수 있는 객체

        - 뷰의 종류

            - 단순뷰: 하나의 테이블 조회 뷰

            - 복합뷰: 둘 이상의 테이블 조인 뷰

        - 정처기 공부했던거 기억

    - 시퀀스

        - 자동으로 연속적인 숫자 부여해주는 객체

    - 시노님

        - 테이블 별칭 생성

## 2-20 DCL

- DCL

    - 데이터 제어어로 객체에 대한 권한을 부여하거나 회수하는 기능

    - 테이블 소유자는 타계정에 테이블 조회 및 수정 권한 부여 및 회수 가능

- 권한

    - 일반적으로 본인 소유가 아닌 테이블은 원칙적으로 조회 불가

    - 업무적으로 필요 시 테이블 소유자가 아닌 계정에 테이블 조회, 수정, 권한 부여 가능

    - 권한 종류

        - 오브젝트 권한

            - 테이블에 대한 구너한 제어

            - 테이블 소유자는 타계정에 소유 테이블에 대한 조회 및 수정 권한 부여 및 회수 가능

        - 시스템 권한

            - 시스템 작업 등을 제어

            - 관리자 권한만 권한 부여 및 회수 가능

- GRANT(부여)

    - 권한 부여 시 반드시 테이블 소유자나 관리자계정으로 접속하여 권한을 부여하여야 함

    - 동시에 여러 유저에 대한 권한 부여 가능

    - 동시 여러 권한 부여 가능

- REVOKE (회수)

    - 동시 여러 권한 회수 가능

    - 이미 회수된 권한 재회수 불가
    
- ROLE

    - 권한의 묶음

    - SYSTEM 계정에서 ROLE 생성 가능

- 권한 부여 옵션 (중간관리자의 권한)

    - WITH GRANT OPTION

        - 오브젝트 권한을 다른 사용자에게 부여할 수 있음

        - 중간 관리자만 회수 가능

        - 중간관리자에게 부여된 권한 회수 시 제 3자에게 부여된 권한도 함께 회수됨

    - WITH ADMIN OPTION

        - 위에꺼 반대



